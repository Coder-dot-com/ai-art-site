{% extends 'home_site/base.html' %}
{% load static %}

{% block content %}


            <!-- ============================================================== -->
            <!-- Start right Content here -->
            <!-- ============================================================== -->

{% comment %} If add video can add here  {% endcomment %}
{% comment %} 
                        <div class="row">


                            <div class="col-12 col-md-11 col-lg-10" style="margin:auto;">
                                <div class="card ">
                                    <div id="carouselExampleFade" class="carousel slide carousel-fade" data-ride="carousel">

                                        <div class="carousel-inner">
                                            <div class="carousel-item active">
                                                <img class="d-block img-fluid mx-auto main-img-user-page" src="{{page.cleaned_image}}" alt="First slide">
                                            </div>
                        
                                        </div>

                                    </div><!-- end carousel --> 
                                                                       
                                    <div class="card-body">
                        
                                        
                                        <h1 style="font-family: Times;font-weight: 500;" class=" text-center">{{page.memorial_title}} {{page.page_for}}</h1>
                                        <p style="font-size: 1.2rem;font-family: times;" class="card-text text-center">{{page.memorial_description}}</p>
                                        
                                        
                        
                        
                        
                                    <div class="d-flex flex-wrap gap-4 align-items-start">
                                            <div class="btn-group mx-auto" role="group" aria-label="Button group with nested dropdown">
                                                <button type="button text-center" class="btn btn-primary site-button btn-dark mx-auto" data-bs-toggle="modal" data-bs-target="#exampleModal"
                                                data-bs-whatever="">Add message</button>
                        
                                            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                                                            <button id="closeMessageForm" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">

                                                            Cannot add messages from dashboard
                        
                                                            
                                                            <form id="messages_form" method="POST" class="needs-validation" novalidate 
                                                            
                                                           
                                                                {% csrf_token %}
                        
                                                                {% for field in message_form %}
                        
                        
                                                                
                        
                                                                <div class="mb-3">
                                                                    <label for="{{field.id}}" class="col-form-label">{{field.field.widget.attrs.field_title}}
                                                                    </label>
                                                                    {{field}}
                                                                    {{field.field.widget.attrs.field_description}}
                        
                                                             
                                                                <div class="invalid-feedback">
                                                                    {{field.field.widget.attrs.error_message}}
                                                                </div>
                                                                <div class="valid-feedback">
                                                                    Looks good!
                                                                </div>
                                                            </div>
                                                                {% endfor %}
                        
                                                                
                        
                        
                        
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary site-secondary-button" data-bs-dismiss="modal">Close</button>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>                                        
                                                <div class="btn-group" role="group">
                                                    <button id="btnGroupDrop1" type="button" class="btn btn-primary site-button dropdown-toggle" data-bs-toggle="dropdown"
                                                        aria-expanded="false">
                                                        Share <i class="mdi mdi-chevron-down"></i>
                                                    </button>
                                                    <ul class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                                                        <li><a href="https://www.facebook.com/sharer/sharer.php?u={{page.get_absolute_url}}" class="dropdown-item" href="#">Facebook <i class="fab fa-facebook-square"></i></a></li>
                                                        <li><a href="https://twitter.com/intent/tweet?url={{page.get_absolute_url}}&text=" class="dropdown-item" href="#">Twitter <i class=" fab fa-twitter"></i> </a></li>
                                                        <li><a href="https://pinterest.com/pin/create/button/?url={{page.get_absolute_url}}&media=&description=" class="dropdown-item" href="#">Pinterest <i class="fab fa-pinterest"></i></a></li>
                        
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    <!-- end card-body -->
                        
                                <!-- end card body -->
                                
                                    </div>
                                </div>
                        
                        
                            </div><!-- end col -->    
                            
                        </div>
 {% endcomment %}
 <div class="">

     <a href="{% url 'home' %}" type="button" class="btn btn-primary site-button btn-lg px-4 me-md-2">Back to home</a>
    </div>
 <br>
 <br>

                        <div id="messages-grid">

                            <div class="masonry-msg-grid" style="margin:0 auto;">
                                {% for message in board_messages %}
                                <div class="col-xs-2 col-sm-4 col-md-3 col-lg-2 msg-grid-item" style="min-width:300px;">
                                    <div class="card user-message">
                                        <img src="{{message.image_link}}" style="" class="card-img-top" alt="">
                                        <div class="card-body">
                                        <p class="card-text font_{{message.id}}">{{message.text}}
                                            
                                            </p>

                                            <style>
                                                    @font-face {
                                                        font-family: '{{message.font_choice.option}}';
                                                        src: url('{{message.font_choice.font_file.url}}');
                                                    }
    
                                                    .font_{{message.id}} {
                                                        font-family: '{{message.font_choice.option}}';
                                                        font-size: {{message.font_choice.font_size}}px;
                                                    }

                                            </style>
                                        </div>
                                        {% comment %} <div class="card-footer bg-transparent border-top font-weight-bold" style="margin-left:auto;">
                                            {{message.name}}
                                        </div> {% endcomment %}
                                    </div>
                                </div><!-- end col -->
                                {% endfor %}


                            </div>
                        



                        </div>

                        <style>

                            .user-message {
                                font-size: 1.4rem;
                                font-weight:800
                                font-family: helvetica, arial;
                                text-align: center;
                            }
                        </style>
                        







{% endblock content %}


{% block scripts %}

<script src="{% static 'dashboard/assets/libs/masonry-layout/masonry.pkgd.min.js' %}"></script>
<script>

    function message_masonry(){

        
        grid = document.querySelector('.masonry-msg-grid')
        new Masonry(grid, {
            itemSelector: '.msg-grid-item',
            gutter: 10,
            isFitWidth: true,
        })
    }

    window.onload = message_masonry


</script>


<script>

    function messageFormSubmit() {
        message_masonry()

        document.getElementById('closeMessageForm').click()
        document.getElementById('messages_form').classList.remove("was-validated");
        document.getElementById('messages_spinner').hidden = false
        
        document.body.onload = message_masonry


    }
    document.getElementById('messages_form').addEventListener('submit', messageFormSubmit)
</script>
{% endblock scripts %}
